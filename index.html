<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FedEx IDCAP | Intelligent DCA Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #f8fafc;
        }

        .glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .fedex-purple {
            background-color: #4D148C;
        }

        .fedex-orange {
            background-color: #FF6600;
        }

        .sidebar-item:hover {
            background: rgba(77, 20, 140, 0.05);
        }

        .sidebar-item.active {
            background: rgba(77, 20, 140, 0.1);
            border-right: 4px solid #4D148C;
            color: #4D148C;
        }

        .animate-sweep {
            position: relative;
            overflow: hidden;
        }

        .animate-sweep::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: sweep 2s infinite;
        }

        @keyframes sweep {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        .modal-bg {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(4px);
            transition: opacity 0.3s ease;
        }

        .toast {
            transform: translateY(100px);
            transition: all 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
        }

        .toast.show {
            transform: translateY(0);
        }
    </style>
</head>

<body class="bg-gray-50 flex h-screen overflow-hidden">

    <!-- Sidebar -->
    <aside class="w-72 bg-white border-r border-gray-100 flex flex-col z-20 shadow-xl">
        <div class="p-8 flex items-center gap-4">
            <div
                class="h-12 w-12 fedex-purple rounded-2xl flex items-center justify-center text-white font-bold text-2xl shadow-lg shadow-purple-900/20">
                F</div>
            <div>
                <h1 class="font-bold text-gray-900 text-lg leading-none">FedEx IDCAP</h1>
                <p class="text-[10px] text-gray-400 uppercase tracking-[0.2em] font-bold mt-2">DCA AI Intelligence</p>
            </div>
        </div>

        <nav class="flex-1 px-6 py-4 space-y-2">
            <button onclick="switchView('admin')" id="btn-admin"
                class="sidebar-item active w-full flex items-center gap-4 px-4 py-3.5 rounded-xl text-sm font-bold transition-all">
                <i data-lucide="layout-dashboard" class="w-5 h-5"></i> Dashboard
            </button>
            <button onclick="switchView('dca')" id="btn-dca"
                class="sidebar-item w-full flex items-center gap-4 px-4 py-3.5 rounded-xl text-sm font-bold text-gray-500 transition-all">
                <i data-lucide="users" class="w-5 h-5"></i> DCA Agent Portal
            </button>

            <div class="pt-8 pb-3 px-4 text-[11px] font-black text-gray-300 uppercase tracking-widest">Core Operations
            </div>
            <button
                class="sidebar-item w-full flex items-center gap-4 px-4 py-3.5 rounded-xl text-sm font-bold text-gray-500">
                <i data-lucide="arrow-right-left" class="w-5 h-5"></i> Case Allocation
            </button>
            <button
                class="sidebar-item w-full flex items-center gap-4 px-4 py-3.5 rounded-xl text-sm font-bold text-gray-500">
                <i data-lucide="shield-check" class="w-5 h-5"></i> SLA Manager
            </button>
        </nav>

        <div class="p-6 border-t border-gray-50">
            <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-2xl border border-gray-100">
                <img src="https://ui-avatars.com/api/?name=Lohit+Admin&background=4D148C&color=fff"
                    class="w-11 h-11 rounded-xl shadow-sm">
                <div class="overflow-hidden">
                    <p class="text-xs font-bold text-gray-900 truncate">Lohit Admin</p>
                    <p class="text-[10px] text-gray-400 font-semibold truncate">Enterprise Manager</p>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto p-10 relative">
        <!-- Header -->
        <div class="flex justify-between items-end mb-12">
            <div>
                <span id="perspective-label"
                    class="text-[11px] font-black text-purple-600 uppercase tracking-[0.3em] mb-3 block">Perspective:
                    Global Admin</span>
                <h2 id="view-title" class="text-4xl font-black text-gray-900 tracking-tight">Enterprise Intelligence
                </h2>
                <p id="view-subtitle" class="text-gray-500 mt-2 font-medium">Predictive recovery analytics & agency
                    workflow optimization.</p>
            </div>
            <div class="flex gap-4">
                <button onclick="reAnalyze()" id="btn-reanalyze"
                    class="bg-white border border-gray-200 p-4 rounded-2xl text-purple-600 hover:bg-purple-50 transition-all shadow-sm flex items-center gap-2 font-bold text-sm">
                    <i data-lucide="wand-2" class="w-5 h-5"></i> Re-Calculate
                </button>
                <button onclick="openModal('new-case')"
                    class="fedex-purple text-white px-8 py-3.5 rounded-2xl text-sm font-bold shadow-2xl shadow-purple-900/30 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center gap-2">
                    <i data-lucide="plus-circle" class="w-5 h-5"></i> New Case
                </button>
            </div>
        </div>

        <!-- Admin View -->
        <div id="view-admin" class="space-y-10">
            <!-- Stats -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="glass p-8 rounded-[40px] shadow-sm group">
                    <p class="text-gray-400 text-[10px] font-black uppercase tracking-widest mb-2">Recoverable Assets
                    </p>
                    <h3 id="stat-assets" class="text-3xl font-black text-gray-900">$4.32M</h3>
                </div>
                <div class="glass p-8 rounded-[40px] shadow-sm group">
                    <p class="text-gray-400 text-[10px] font-black uppercase tracking-widest mb-2">Efficiency Ratio</p>
                    <h3 class="text-3xl font-black text-gray-900">74.2%</h3>
                </div>
                <div class="glass p-8 rounded-[40px] shadow-sm group">
                    <p class="text-gray-400 text-[10px] font-black uppercase tracking-widest mb-2">Pipeline Volume</p>
                    <h3 id="stat-volume" class="text-3xl font-black text-gray-900">1,248</h3>
                </div>
                <div class="glass p-8 rounded-[40px] shadow-sm group border-l-4 border-l-red-500">
                    <p class="text-gray-400 text-[10px] font-black uppercase tracking-widest mb-2">Risk Exposure</p>
                    <h3 class="text-3xl font-black text-gray-900">11.4%</h3>
                </div>
            </div>

            <!-- Pipeline -->
            <div class="glass p-10 rounded-[48px] shadow-sm">
                <div class="flex justify-between items-center mb-10">
                    <h4 class="font-black text-xl text-gray-900">AI Priority Recovery Pipeline</h4>
                    <span class="text-[10px] text-gray-400 font-bold uppercase tracking-widest">Live Updates
                        Enabled</span>
                </div>
                <div id="priority-list" class="space-y-4">
                    <!-- Cases Rendered Here -->
                </div>
            </div>
        </div>

        <!-- DCA View -->
        <div id="view-dca" class="hidden space-y-10">
            <div id="dca-grid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8">
                <!-- DCA Cards Rendered Here -->
            </div>
        </div>

        <!-- Modal -->
        <div id="main-modal"
            class="fixed inset-0 z-50 flex items-center justify-center modal-bg opacity-0 pointer-events-none">
            <div class="glass w-full max-w-xl p-10 rounded-[48px] transform scale-95 transition-all">
                <div id="modal-content"></div>
            </div>
        </div>

        <!-- Toast -->
        <div id="toast"
            class="toast fixed bottom-10 left-1/2 -translate-x-1/2 glass px-10 py-5 rounded-[24px] shadow-2xl z-50 flex items-center gap-4 font-bold text-gray-900">
            <div class="h-3 w-3 rounded-full fedex-purple animate-pulse"></div>
            <span id="toast-message">Message here</span>
        </div>
    </main>

    <script>
        // --- DATA & STATE ---
        let cases = [
            { id: 1, name: "Stark Industries", amount: 154200, age: 45, prob: 92, segment: 'Tech', status: 'Pending' },
            { id: 2, name: "Wayne Enterprises", amount: 82100, age: 62, prob: 88, segment: 'Finance', status: 'Call Scheduled' },
            { id: 3, name: "Cyberdyne Systems", amount: 245000, age: 104, prob: 42, segment: 'Industrial', status: 'Overdue' },
            { id: 4, name: "Oscorp Corp", amount: 12500, age: 15, prob: 98, segment: 'Pharma', status: 'Healthy' }
        ];

        // --- CORE UI ---
        function lucideInit() { lucide.createIcons(); }

        function switchView(view) {
            document.getElementById('view-admin').classList.toggle('hidden', view !== 'admin');
            document.getElementById('view-dca').classList.toggle('hidden', view !== 'dca');
            document.getElementById('btn-admin').classList.toggle('active', view === 'admin');
            document.getElementById('btn-dca').classList.toggle('active', view === 'dca');
            document.getElementById('perspective-label').innerText = view === 'admin' ? "Perspective: Global Admin" : "Perspective: DCA Agent";
            document.getElementById('view-title').innerText = view === 'admin' ? "Enterprise Intelligence" : "DCA Agent Portal";

            if (view === 'admin') renderAdmin(); else renderDca();
            lucideInit();
        }

        function renderAdmin() {
            const list = document.getElementById('priority-list');
            list.innerHTML = cases.sort((a, b) => b.prob - a.prob).map(c => `
                <div class="flex items-center justify-between p-6 bg-white/50 hover:bg-white rounded-3xl border border-gray-100 transition-all hover:shadow-lg group">
                    <div class="flex items-center gap-6">
                        <div class="w-12 h-12 ${getSegColor(c.segment)} rounded-2xl flex items-center justify-center text-white font-black text-xs">${c.name[0]}${c.name[1]}</div>
                        <div>
                            <p class="font-black text-gray-900">${c.name}</p>
                            <p class="text-[10px] text-gray-400 font-bold uppercase tracking-widest">${c.segment} â€¢ ${c.status}</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-12">
                        <div class="text-right"><p class="font-black text-gray-900">$${c.amount.toLocaleString()}</p></div>
                        <div class="w-32 flex flex-col items-end">
                            <span class="text-xs font-black ${c.prob > 80 ? 'text-green-500' : 'text-orange-500'}">${c.prob}%</span>
                            <div class="w-full h-1 bg-gray-100 rounded-full mt-1 overflow-hidden">
                                <div class="h-full ${c.prob > 80 ? 'bg-green-500' : 'bg-orange-500'}" style="width: ${c.prob}%"></div>
                            </div>
                        </div>
                        <button onclick="inspectCase(${c.id})" class="p-2 text-gray-300 hover:text-purple-600 transition-colors"><i data-lucide="chevron-right"></i></button>
                    </div>
                </div>
            `).join('');
            document.getElementById('stat-volume').innerText = cases.length;
            document.getElementById('stat-assets').innerText = '$' + (cases.reduce((a, b) => a + b.amount, 0) / 1000000).toFixed(2) + 'M';
            lucideInit();
        }

        function renderDca() {
            const grid = document.getElementById('dca-grid');
            grid.innerHTML = cases.filter(c => c.prob > 50).map(c => `
                <div class="glass p-10 rounded-[48px] border-b-8 ${c.status === 'Recovered' ? 'border-b-green-500 opacity-60' : 'border-b-purple-500'} group transition-all">
                    <h4 class="text-2xl font-black text-gray-900 mb-2 truncate">${c.name}</h4>
                    <p class="text-[10px] text-gray-400 font-black tracking-widest uppercase mb-8">CASE #FX-${c.id}00</p>
                    <div class="bg-gray-50 rounded-3xl p-6 mb-8 flex justify-between items-center">
                        <span class="text-gray-400 font-bold text-sm">Principal</span>
                        <span class="font-black text-xl text-gray-900">$${c.amount.toLocaleString()}</span>
                    </div>
                    <button onclick="${c.status === 'Recovered' ? '' : `startSession(${c.id})`}" class="w-full py-4 ${c.status === 'Recovered' ? 'bg-green-500' : 'fedex-purple'} text-white rounded-2xl font-black text-xs tracking-widest shadow-xl flex items-center justify-center gap-2 transition-all">
                        ${c.status === 'Recovered' ? '<i data-lucide="check"></i> COMPLETED' : '<i data-lucide="phone"></i> START CALL'}
                    </button>
                </div>
            `).join('');
            lucideInit();
        }

        // --- INTERACTIVE ACTIONS ---
        function reAnalyze() {
            const btn = document.getElementById('btn-reanalyze');
            btn.innerHTML = `<i data-lucide="loader" class="animate-spin"></i> Processing...`;
            setTimeout(() => {
                cases.forEach(c => c.prob = Math.min(100, Math.max(0, c.prob + Math.floor(Math.random() * 10 - 5))));
                renderAdmin();
                showToast("System re-analysis complete. Priorities updated.");
                btn.innerHTML = `<i data-lucide="wand-2"></i> Re-Calculate`;
                lucideInit();
            }, 1000);
        }

        function addCase() {
            const name = document.getElementById('in-name').value;
            const amount = parseInt(document.getElementById('in-amount').value);
            const segment = document.getElementById('in-segment').value;

            if (!name || !amount) return showToast("Please fill all fields.");

            cases.push({
                id: Date.now(),
                name,
                amount,
                age: 1,
                prob: 75,
                segment,
                status: 'New'
            });

            closeModal();
            renderAdmin();
            showToast(`New case admitted: ${name}`);
        }

        function startSession(id) {
            const c = cases.find(x => x.id === id);
            openModal('call', `
                <div class="text-center">
                    <div class="w-20 h-20 bg-green-50 text-green-600 rounded-3xl flex items-center justify-center mx-auto mb-6 animate-pulse"><i data-lucide="phone-forwarded" class="w-10 h-10"></i></div>
                    <h3 class="text-2xl font-black text-gray-900 mb-2">Secure Call Session</h3>
                    <p class="text-gray-500 font-medium mb-10">Calling ${c.name} Bridge #FX-VOIP-12</p>
                    <div class="flex gap-4">
                        <button onclick="closeModal()" class="flex-1 py-4 bg-gray-50 text-gray-400 font-black rounded-2xl text-[10px] tracking-widest uppercase">Discard</button>
                        <button onclick="markRecovered(${id})" class="flex-1 py-4 bg-green-500 text-white font-black rounded-2xl text-[10px] tracking-widest uppercase shadow-xl shadow-green-900/10">Mark as Recovered</button>
                    </div>
                </div>
            `);
        }

        function markRecovered(id) {
            const c = cases.find(x => x.id === id);
            c.status = 'Recovered';
            c.prob = 100;
            closeModal();
            renderDca();
            showToast("Case marked as recovered. Dashboard sync initiated.");
        }

        function inspectCase(id) {
            const c = cases.find(x => x.id === id);
            openModal('inspect', `
                <div class="flex justify-between items-start mb-10">
                    <div>
                        <h4 class="text-3xl font-black text-gray-900">${c.name}</h4>
                        <p class="text-[10px] text-gray-400 font-black tracking-widest uppercase mt-2">${c.segment} Segment Portfolio</p>
                    </div>
                    <div class="text-right">
                        <span class="text-xs font-black text-green-500 uppercase tracking-widest">${c.status}</span>
                    </div>
                </div>
                <div class="bg-gray-50 p-8 rounded-[40px] mb-10 space-y-4">
                    <div class="flex justify-between font-bold text-sm"><span>Outstanding Principal</span><span class="font-black text-gray-900">$${c.amount.toLocaleString()}</span></div>
                    <div class="flex justify-between font-bold text-sm"><span>AI Risk Score</span><span class="text-purple-600 font-black">${c.prob}% Recovery Likelihood</span></div>
                </div>
                <button onclick="closeModal()" class="w-full py-4 fedex-purple text-white font-black rounded-2xl text-xs tracking-widest uppercase shadow-xl">Close Insight</button>
            `);
        }

        // --- MODAL UTILS ---
        function openModal(type, content) {
            const modal = document.getElementById('main-modal');
            const inner = document.getElementById('modal-content');

            if (type === 'new-case') {
                inner.innerHTML = `
                    <h3 class="text-3xl font-black text-gray-900 mb-2">Admit New Case</h3>
                    <p class="text-gray-500 mb-10 font-medium tracking-tight">Enter customer debt details for AI analysis.</p>
                    <div class="space-y-6">
                        <input id="in-name" type="text" class="w-full bg-gray-50 px-6 py-4 rounded-2xl border-none font-bold text-gray-900" placeholder="Customer Name">
                        <div class="grid grid-cols-2 gap-4">
                            <input id="in-amount" type="number" class="w-full bg-gray-50 px-6 py-4 rounded-2xl border-none font-bold text-gray-900" placeholder="Amount ($)">
                            <select id="in-segment" class="w-full bg-gray-50 px-6 py-4 rounded-2xl border-none font-bold text-gray-900">
                                <option>Tech</option><option>Industrial</option><option>Finance</option><option>Pharma</option>
                            </select>
                        </div>
                        <button onclick="addCase()" class="w-full py-5 fedex-purple text-white rounded-3xl font-black text-sm tracking-widest shadow-2xl">INITIATE ASSESSMENT</button>
                    </div>
                `;
            } else if (content) inner.innerHTML = content;

            modal.classList.remove('opacity-0', 'pointer-events-none');
            modal.querySelector('div').classList.remove('scale-95');
            modal.querySelector('div').classList.add('scale-100');
            lucideInit();
        }

        function closeModal() {
            const modal = document.getElementById('main-modal');
            modal.classList.add('opacity-0', 'pointer-events-none');
            modal.querySelector('div').classList.remove('scale-100');
            modal.querySelector('div').classList.add('scale-95');
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            document.getElementById('toast-message').innerText = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }

        function getSegColor(s) {
            const m = { 'Tech': 'bg-purple-600', 'Finance': 'bg-blue-600', 'Industrial': 'bg-gray-800', 'Pharma': 'bg-green-600' };
            return m[s] || 'bg-indigo-500';
        }

        document.getElementById('main-modal').addEventListener('click', function (e) { if (e.target === this) closeModal(); });

        // INIT
        switchView('admin');
    </script>
</body>

</html>